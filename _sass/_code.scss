/* -------------------------------------------
   Code highlighting (Rouge)
   Palette: cool neutrals + blue/teal/violet accents
   ------------------------------------------- */

/* Container */
.highlight {
  background: #f8fafc;                /* was #f8f8f8 */
  padding: 1px 1em;
  border-radius: 6px;                  /* a bit rounder */
  font-size: 0.9em;
  overflow: auto;
  margin: 1em -1em;
  border: 1px solid #e5e7eb;
}

.highlight code { padding: 0; }
div.highlight { display: grid; }

/* --- Tokens -------------------------------------------------- */
/* Feel free to tweak these if you want a different vibe */
$hl-comment:  #6b7280;  /* slate-500 */
$hl-keyword:  #1d4ed8;  /* blue-700  */
$hl-op:       #1f2937;  /* gray-800 for operators */
$hl-type:     #7c3aed;  /* violet-600 */
$hl-string:   #b45309;  /* amber-700  */
$hl-number:   #0f766e;  /* teal-700   */
$hl-func:     #0ea5e9;  /* sky-500    */
$hl-var:      #0f766e;  /* teal-700   */
$hl-attr:     #0f766e;  /* teal-700   */
$hl-tag:      #1e3a8a;  /* indigo-900 */
$hl-const:    #7c3aed;  /* violet-600 */
$hl-muted:    #9ca3af;  /* gray-400   */
$hl-output:   #6b7280;  /* slate-500  */
$hl-err-bg:   #fee2e2;  /* red-100    */
$hl-err-fg:   #991b1b;  /* red-800    */
$hl-add-bg:   #ecfdf5;  /* emerald-50 */
$hl-add-fg:   #065f46;  /* emerald-800*/
$hl-del-bg:   #fef2f2;  /* rose-50    */
$hl-del-fg:   #991b1b;  /* rose-800   */

/* Comments */
.highlight .c,
.highlight .cm,
.highlight .c1 {
  color: $hl-comment;
  font-style: italic;
}
.highlight .cs, .highlight .cp {
  color: $hl-muted;
  font-weight: 600;
  font-style: italic;
}

/* Errors & warnings */
.highlight .err {
  color: $hl-err-fg;
  background-color: $hl-err-bg;
  border-radius: 3px;
  padding: 0 0.2em;
}

/* Keywords / operators */
.highlight .k,
.highlight .kc,
.highlight .kd,
.highlight .kp,
.highlight .kr {
  color: $hl-keyword;
  font-weight: 700;
}

.highlight .o,
.highlight .ow {
  color: $hl-op;
  font-weight: 700;
}

/* Types, classes, tags */
.highlight .kt {
  color: $hl-type;
  font-weight: 700;
}
.highlight .nc { /* class names */
  color: $hl-type;
  font-weight: 700;
}
.highlight .nt { /* HTML/XML tags */
  color: $hl-tag;
}

/* Names, functions, exceptions */
.highlight .na  { color: $hl-attr; }     /* attribute */
.highlight .nb  { color: #0369a1; }      /* builtins â†’ cyan-700 */
.highlight .no  { color: $hl-const; }    /* constants */
.highlight .nn  { color: #475569; }      /* namespaces */
.highlight .nv,
.highlight .vc,
.highlight .vg,
.highlight .vi  { color: $hl-var; }      /* variables */
.highlight .nf  { color: $hl-func; font-weight: 700; } /* function */
.highlight .ne  { color: #dc2626; font-weight: 700; }  /* exception */

/* Literals: numbers & strings */
.highlight .m,
.highlight .mf,
.highlight .mh,
.highlight .mi,
.highlight .mo,
.highlight .il  { color: $hl-number; }

.highlight .s,
.highlight .sb,
.highlight .sc,
.highlight .sd,
.highlight .s2,
.highlight .se,
.highlight .sh,
.highlight .si,
.highlight .sx,
.highlight .sr,
.highlight .s1,
.highlight .dl,
.highlight .ss  { color: $hl-string; }

/* Misc */
.highlight .w   { color: #9aa3af; }      /* whitespace markers */
.highlight .bp  { color: $hl-muted; }    /* pseudo/builtins alt */
.highlight .gh  { color: $hl-muted; }    /* headings in diffs */
.highlight .gu  { color: #94a3b8; }      /* diff range info */
.highlight .gp  { color: #64748b; }      /* prompts */
.highlight .go  { color: $hl-output; }   /* general output */
.highlight .ge  { font-style: italic; }  /* emphasis */
.highlight .gs  { font-weight: 700; }    /* strong */

/* Diffs */
.highlight .gd {
  color: $hl-del-fg;
  background-color: $hl-del-bg;
}
.highlight .gd .x {
  color: $hl-del-fg;
  background-color: mix($hl-del-bg, #fecaca, 60%);
}
.highlight .gi {
  color: $hl-add-fg;
  background-color: $hl-add-bg;
}
.highlight .gi .x {
  color: $hl-add-fg;
  background-color: mix($hl-add-bg, #a7f3d0, 60%);
}

/* Links in code blocks should not show external arrow */
.highlight a::after { content: ""; }

/* Optional: Dark mode tweaks */
@media (prefers-color-scheme: dark) {
  .highlight {
    background: #0b1020;
    border-color: #1f2937;
  }
  .highlight,
  .highlight * {
    color: #e5e7eb;
  }
  .highlight .c,
  .highlight .cm,
  .highlight .c1 { color: #a1a1aa; }           /* softer comments */
  .highlight .k,
  .highlight .kc,
  .highlight .kd,
  .highlight .kp,
  .highlight .kr { color: #93c5fd; }           /* blue-300 */
  .highlight .o,
  .highlight .ow { color: #e5e7eb; }
  .highlight .kt,
  .highlight .nc { color: #c4b5fd; }           /* violet-300 */
  .highlight .nt { color: #bfdbfe; }           /* tag */
  .highlight .nf { color: #67e8f9; }           /* function */
  .highlight .no { color: #c4b5fd; }           /* constants */
  .highlight .m,
  .highlight .mf,
  .highlight .mh,
  .highlight .mi,
  .highlight .mo,
  .highlight .il  { color: #5eead4; }          /* numbers */
  .highlight .s,
  .highlight .sb,
  .highlight .sc,
  .highlight .sd,
  .highlight .s2,
  .highlight .se,
  .highlight .sh,
  .highlight .si,
  .highlight .sx,
  .highlight .sr,
  .highlight .s1,
  .highlight .dl,
  .highlight .ss  { color: #fbbf24; }          /* strings */
  .highlight .err { color: #fecaca; background: #7f1d1d; }
  .highlight .gd  { color: #fecaca; background: #7f1d1d; }
  .highlight .gi  { color: #bbf7d0; background: #064e3b; }
}